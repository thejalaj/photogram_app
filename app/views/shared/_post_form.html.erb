<button class="btn btn-primary relative waves-light" id="myBtn">Upload a new post</button>
<div id="myModal" class="modal">
  <div class="modal-content container card modal-dialog" style="width:550px">
    <% if logged_in? %>
      <center class="">
        <%= form_for @post, html: {multipart: true} do |f| %>
          <div class="field">
            <br>
            <%= f.label :image %>
            <img id="img_prev" src="#" alt="your image" />
            <br>
            <%= f.file_field :image, onchange: "readURL(this);" %>
            <br>
            <%= f.label :description %>
            <%= f.text_area :content, placeholder: "Compose new post." %>
          </div>
          <%= f.submit "Post", class: "btn btn-primary" %>
        <% end %>
    </center>
    <% end%>
    <span class="close card btn btn-danger">&times;</span>
  </div>
</div>
<br>
<hr>

<script>
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $('#img_prev')
          .attr('src', e.target.result)
          .width(430)
          .height(200);
      };

      reader.readAsDataURL(input.files[0]);
    }
  }
 </script>


<script>
  var modal = document.getElementById('myModal');
  var btn = document.getElementById("myBtn");
  var span = document.getElementsByClassName("close")[0];
  btn.onclick = function() {
      modal.style.display = "block";
  }
  span.onclick = function() {
      modal.style.display = "none";
  }
  window.onclick = function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }
</script>
